<xml version="Mixly 2.0 rc4" board="Arduino ESP32@AI Thinker ESP32-CAM"><block type="serialBT_Init" id="x(fNkfzsV]~t*Kv)A+8j" x="0" y="0"><value name="CONTENT"><shadow type="text" id="aE2G_5m(_}Mrsd:|BuMo"><field name="TEXT">ESP32BT</field></shadow></value><next><block type="serial_begin" id="!FVN.QRM_v_atmACqZ17"><field name="serial_select">Serial</field><value name="CONTENT"><shadow type="math_number" id="wV*wbM/oe#6=SJ/6.O0N"><field name="NUM">115200</field></shadow></value><next><block type="controls_if" id="S)1-zBz(L472Yc+R])n$"><value name="IF0"><block type="serialBT_available" id="lH-]+E}vW+t#Sgoe.e_!"></block></value><statement name="DO0"><block type="variables_declare" id="O6bQ_2Y)FNRVS/1mLd5,"><field name="variables_type">global_variate</field><field name="VAR">a</field><field name="TYPE">char</field><next><block type="variables_set" id="tK8/hkIb]lZPKg66xmCl"><field name="VAR">a</field><value name="VALUE"><block type="serialBT_read" id="6cuHQoR.~sd6D4}1?O)r"></block></value><next><block type="serial_print" id="EIob!nh?(7=w]OsYnD]+"><field name="serial_select">Serial</field><field name="new_line">println</field><value name="CONTENT"><block type="variables_get" id="N,@U=${``;5OYUP+nvW6"><field name="VAR">a</field></block></value><next><block type="controls_switch_case" id=",#58Z]2pG//4jhvf7(aS"><mutation elseif="5"></mutation><value name="IF0"><block type="variables_get" id="66FGMsee0_NR+[Pm5VZ/"><field name="VAR">a</field></block></value><value name="IF1"><block type="text_char" id="YRXOTnG.V[]1`WC6s?zE"><field name="TEXT">f</field></block></value><statement name="DO1"><block type="procedures_callnoreturn" id="rY^QfbMx?If1EnJH)Amd"><mutation name="forward"></mutation></block></statement><value name="IF2"><block type="text_char" id="3Q(:z+f=*d$pG.-R@p{5"><field name="TEXT">b</field></block></value><statement name="DO2"><block type="procedures_callnoreturn" id=")JvZ9qQIF4Mkam388Ih!"><mutation name="back"></mutation></block></statement><value name="IF3"><block type="text_char" id="(Q2u}#k|(fe00EJOuhnH"><field name="TEXT">l</field></block></value><statement name="DO3"><block type="procedures_callnoreturn" id="3CU}^6*+IL-ec2i+79Xr"><mutation name="left"></mutation></block></statement><value name="IF4"><block type="text_char" id="im?+0DapBb/b[n7J|VZ1"><field name="TEXT">r</field></block></value><statement name="DO4"><block type="procedures_callnoreturn" id="~4rSq8^~)^n;a=6^Jn+@"><mutation name="right"></mutation></block></statement><value name="IF5"><block type="text_char" id="-+ll@P@=:)=A5iu7M^6G"><field name="TEXT">s</field></block></value><statement name="DO5"><block type="procedures_callnoreturn" id="@L91JPM0-MchhAV@)-C#"><mutation name="stop"></mutation></block></statement></block></next></block></next></block></next></block></statement></block></next></block></next></block><block type="variables_declare" id=")oFE)1wnYJ??44ZHX-js" x="0" y="594"><field name="variables_type">global_variate</field><field name="VAR">ENA</field><field name="TYPE">int</field><value name="VALUE"><block type="math_number" id="]:2j?#y~dI4C4:2caLba"><field name="NUM">25</field></block></value><next><block type="variables_declare" id="`G8q*J^pvDw5vZ`-O{hK"><field name="variables_type">global_variate</field><field name="VAR">ENB</field><field name="TYPE">int</field><value name="VALUE"><block type="math_number" id="dErepef31M8YtAUxXjP*"><field name="NUM">26</field></block></value><next><block type="variables_declare" id="e!8N}mSqcmUa,C6`Q5uJ"><field name="variables_type">global_variate</field><field name="VAR">PWM</field><field name="TYPE">int</field><value name="VALUE"><block type="math_number" id="T{Q6v?EH=$.JcEK!euBo"><field name="NUM">120</field></block></value><next><block type="variables_declare" id="][@4lmem`;;5s8:3P(W{"><field name="variables_type">global_variate</field><field name="VAR">pin1</field><field name="TYPE">int</field><value name="VALUE"><block type="math_number" id=")5/9PQ~5)rvq89:SKds`"><field name="NUM">13</field></block></value><next><block type="variables_declare" id="Z60*KA0j*;NM~}WIe@nj"><field name="variables_type">global_variate</field><field name="VAR">pin2</field><field name="TYPE">int</field><value name="VALUE"><block type="math_number" id="]*XUu0w4PwcTsaAWYVr9"><field name="NUM">12</field></block></value><next><block type="variables_declare" id="hnyIjS-MAU8KRdL268XG"><field name="variables_type">global_variate</field><field name="VAR">pin3</field><field name="TYPE">int</field><value name="VALUE"><block type="math_number" id=".=lYJ|8Yix9P/28sJX(5"><field name="NUM">14</field></block></value><next><block type="variables_declare" id="^!Y*`6hbgp?/Ao4-I=V)"><field name="variables_type">global_variate</field><field name="VAR">pin4</field><field name="TYPE">int</field><value name="VALUE"><block type="math_number" id="/ym(A/A64=:EKRSh8mge"><field name="NUM">27</field></block></value><next><block type="ledcWrite" id="{T!+bX)r|7enVW4L9L,N"><value name="PIN"><shadow type="pins_pwm" id="`N5HR~:=L]y^EkqNE_bh"><field name="PIN">0</field></shadow><block type="variables_get" id="-XQpxO.8+hh!f^15Hz*s"><field name="VAR">ENA</field></block></value><value name="NUM"><shadow type="math_number" id="xgR+)Qe-U`zb:O}I?#Q|"><field name="NUM">0</field></shadow><block type="variables_get" id="KyMT)-M)wh(`fIu-qcTn"><field name="VAR">PWM</field></block></value><next><block type="ledcWrite" id="hRHq[^KINYB[`6JCEq2~"><value name="PIN"><shadow type="pins_pwm" id="yjgh^TidQ!06KA:4vr(M"><field name="PIN">0</field></shadow><block type="variables_get" id="2IB$7Xc!qKu=-2zpEo}C"><field name="VAR">ENB</field></block></value><value name="NUM"><shadow type="math_number" id="{O(7ID_S^)~7SGe.ElJH"><field name="NUM">0</field></shadow><block type="variables_get" id="n1rWW4$KkPqo?{wSk[q["><field name="VAR">PWM</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block><block type="procedures_defnoreturn" id=",`rH?~rfJBBM,@rMzrAY" x="0" y="914"><field name="NAME">left</field><statement name="STACK"><block type="inout_digital_write2" id="6i[/9u:v7(1S+^G0`;f["><value name="PIN"><shadow type="pins_digitalWrite" id="i^b,+bb[C{vBzwjuI$|2"><field name="PIN">0</field></shadow><block type="variables_get" id="krzuS)NhDW438~u!`ea|"><field name="VAR">pin1</field></block></value><value name="STAT"><shadow type="inout_highlow" id="R3U5b1~,Kis~;|z#/)6:"><field name="BOOL">HIGH</field></shadow></value><next><block type="inout_digital_write2" id="nT}0hBTpbQ6XD5[lKz5C"><value name="PIN"><shadow type="pins_digitalWrite" id="L5Jkp|YF^xvlX:5(Gx77"><field name="PIN">0</field></shadow><block type="variables_get" id="hxIt#-7[wz73_[dq@[g+"><field name="VAR">pin2</field></block></value><value name="STAT"><shadow type="inout_highlow" id="D#pUjT~Xl!paWDBzXB#P"><field name="BOOL">LOW</field></shadow></value><next><block type="inout_digital_write2" id="NU7p=I,.?4(pTEi3@U4Z"><value name="PIN"><shadow type="pins_digitalWrite" id="/o#]g?8-y2oT9:jLh,f!"><field name="PIN">0</field></shadow><block type="variables_get" id="V=W.!*rKI8vBGcib96J-"><field name="VAR">pin3</field></block></value><value name="STAT"><shadow type="inout_highlow" id="H)D4+-l=LsOSvp?/e0C;"><field name="BOOL">LOW</field></shadow></value><next><block type="inout_digital_write2" id="wUPnx{WtOh.eb)9|H9YG"><value name="PIN"><shadow type="pins_digitalWrite" id=".VzGnQwl_=9Es]h7(C[]"><field name="PIN">0</field></shadow><block type="variables_get" id="kD(M|;kEpS^`Ia5^39.6"><field name="VAR">pin4</field></block></value><value name="STAT"><shadow type="inout_highlow" id="$GjNT5$NUG@#TOpv3b^y"><field name="BOOL">LOW</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type="procedures_defnoreturn" id="l*bs/;Pt#Qk*=Ag,#lWC" x="0" y="1145"><field name="NAME">back</field><statement name="STACK"><block type="inout_digital_write2" id="twDinl`l2+.QyV6A?Tfl"><value name="PIN"><shadow type="pins_digitalWrite" id="P4i0BQ:bXIlzR(4eW:1s"><field name="PIN">0</field></shadow><block type="variables_get" id="(GmMd2Bq1OI;:8bk|:x`"><field name="VAR">pin1</field></block></value><value name="STAT"><shadow type="inout_highlow" id="3`zA]SlnyJ8C3q-`!5!+"><field name="BOOL">LOW</field></shadow></value><next><block type="inout_digital_write2" id="D8=-zzNj-EFc,f:p*#X2"><value name="PIN"><shadow type="pins_digitalWrite" id="!LQutOFe$Bhu,]|V!C+_"><field name="PIN">0</field></shadow><block type="variables_get" id="vwNi$a-0rzq|:=sIYX`#"><field name="VAR">pin2</field></block></value><value name="STAT"><shadow type="inout_highlow" id="O=8]K6Ote-kUL$FVK]-V"><field name="BOOL">HIGH</field></shadow></value><next><block type="inout_digital_write2" id="/Z#rRPNW)!U1~C*?n{_m"><value name="PIN"><shadow type="pins_digitalWrite" id=")rEIBQwno.Wr!FO!!!}u"><field name="PIN">0</field></shadow><block type="variables_get" id="`/FG_r{G-nad2X;I3-Lc"><field name="VAR">pin3</field></block></value><value name="STAT"><shadow type="inout_highlow" id="aRdo,nD3]uei3|yBLQ*5"><field name="BOOL">LOW</field></shadow></value><next><block type="inout_digital_write2" id="vSo!(wI,*agcknOdX41g"><value name="PIN"><shadow type="pins_digitalWrite" id="Bz{|`q5nPcyTC?x`jT^U"><field name="PIN">0</field></shadow><block type="variables_get" id="}wFz.|sVf@j}AB=L~Csd"><field name="VAR">pin4</field></block></value><value name="STAT"><shadow type="inout_highlow" id="L+B$e!_lz^aKk1,NDq:L"><field name="BOOL">HIGH</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type="procedures_defnoreturn" id="(a=n^OjK0B_.EU^?j.ip" x="0" y="1376"><field name="NAME">right</field><statement name="STACK"><block type="inout_digital_write2" id="Z0|BWtj.XVN{^2YGu#5_"><value name="PIN"><shadow type="pins_digitalWrite" id="?;V3.!H+^@JpkPtz-ww6"><field name="PIN">0</field></shadow><block type="variables_get" id="DUP{6AF_.UERjYO87R;]"><field name="VAR">pin1</field></block></value><value name="STAT"><shadow type="inout_highlow" id="V:Yi5QodoLZqBLeAh~Rg"><field name="BOOL">LOW</field></shadow></value><next><block type="inout_digital_write2" id="$Ksf?O6D~#6;i(Z8c^K+"><value name="PIN"><shadow type="pins_digitalWrite" id=",mx)4^^@Dm,-netpbR|X"><field name="PIN">0</field></shadow><block type="variables_get" id="FeO?4AOu|^:0hdWU-@qv"><field name="VAR">pin2</field></block></value><value name="STAT"><shadow type="inout_highlow" id="@F|e*-T|L|Yb+TWJ2fmy"><field name="BOOL">LOW</field></shadow></value><next><block type="inout_digital_write2" id="6#j=OIiXnr#?@m.bp$q{"><value name="PIN"><shadow type="pins_digitalWrite" id="Cgn0[YI2NnbzfpQ6,MhE"><field name="PIN">0</field></shadow><block type="variables_get" id="b7*XNXFdXOGIecHihJ9x"><field name="VAR">pin3</field></block></value><value name="STAT"><shadow type="inout_highlow" id="?AJ}a2Hg)x1iPqEYA4JB"><field name="BOOL">HIGH</field></shadow></value><next><block type="inout_digital_write2" id="v,f.W-d]$SU]_a*r)45R"><value name="PIN"><shadow type="pins_digitalWrite" id="Q+2aq8_fxq^IG4us5G.]"><field name="PIN">0</field></shadow><block type="variables_get" id="NXiZ,/m!Mu[CnO$HQ~|J"><field name="VAR">pin4</field></block></value><value name="STAT"><shadow type="inout_highlow" id="CIkGE3Zn?cs-X+0upk~^"><field name="BOOL">LOW</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type="procedures_defnoreturn" id="mW8Ejy?*^j~A]_Sc4iqQ" x="0" y="1607"><field name="NAME">stop</field><statement name="STACK"><block type="inout_digital_write2" id="~-[zVz1?tik.nv`5}oW{"><value name="PIN"><shadow type="pins_digitalWrite" id="RJm0)m@S@bHp51h}7,|v"><field name="PIN">0</field></shadow><block type="variables_get" id="cRm_AIe5CS@d+DPM6}c0"><field name="VAR">pin1</field></block></value><value name="STAT"><shadow type="inout_highlow" id="-5vAh1:$Bb?mBzn5BnnA"><field name="BOOL">LOW</field></shadow></value><next><block type="inout_digital_write2" id="IIOV/[fU1Pan,a,g3MPH"><value name="PIN"><shadow type="pins_digitalWrite" id="*!eI;;yWd7Kk|i6jD{^t"><field name="PIN">0</field></shadow><block type="variables_get" id="0*Eq6?D~7@O(1*c*{K@d"><field name="VAR">pin2</field></block></value><value name="STAT"><shadow type="inout_highlow" id="MY[|N+Kp#4iXlLs~Zj!W"><field name="BOOL">LOW</field></shadow></value><next><block type="inout_digital_write2" id="GmIdiFcUt*}mlgBMm5$E"><value name="PIN"><shadow type="pins_digitalWrite" id=".[v1vnwFH_dt3a_Vefz_"><field name="PIN">0</field></shadow><block type="variables_get" id="i@QIMrXF~I*{D5Oe/xHT"><field name="VAR">pin3</field></block></value><value name="STAT"><shadow type="inout_highlow" id="W?`9qt5f]T:^Q)Bhn$^B"><field name="BOOL">LOW</field></shadow></value><next><block type="inout_digital_write2" id="fy@z*Dcu0er,b|0AC(,;"><value name="PIN"><shadow type="pins_digitalWrite" id="xIEAtf*7,0@t2,+TU.8P"><field name="PIN">0</field></shadow><block type="variables_get" id="ATr*30$|;e.YK)8gYQBi"><field name="VAR">pin4</field></block></value><value name="STAT"><shadow type="inout_highlow" id="ATROQ{e6k[EdiQ:^;w|}"><field name="BOOL">LOW</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type="procedures_defnoreturn" id="hDZ(i`KxB!Aw^.8rzj-f" x="0" y="1838"><field name="NAME">forward</field><statement name="STACK"><block type="inout_digital_write2" id="nLX0w=FgVQK3EY37JnqA"><value name="PIN"><shadow type="pins_digitalWrite" id="]XADy,USuESYtu::]n)s"><field name="PIN">0</field></shadow><block type="variables_get" id=",Ujd}?$ZB6!Jre^90Zv}"><field name="VAR">pin1</field></block></value><value name="STAT"><shadow type="inout_highlow" id="3}hl++9PAj}uI5T.`l-k"><field name="BOOL">HIGH</field></shadow></value><next><block type="inout_digital_write2" id="ObBOr~fhm$T@J3?f!sIF"><value name="PIN"><shadow type="pins_digitalWrite" id="*i9Jnt8)Fwax6;vUe[q:"><field name="PIN">0</field></shadow><block type="variables_get" id="(Qc,$H8.Bhm)}?)jWh;Q"><field name="VAR">pin2</field></block></value><value name="STAT"><shadow type="inout_highlow" id="zfN92~D}GK]94L{=i|W-"><field name="BOOL">LOW</field></shadow></value><next><block type="inout_digital_write2" id="dog_5V`{q5OScHJZ!]fE"><value name="PIN"><shadow type="pins_digitalWrite" id="5N/O3Xm|?5H`$X:HIzn="><field name="PIN">0</field></shadow><block type="variables_get" id="a_t17Tk]8CfV)6*BZFCP"><field name="VAR">pin3</field></block></value><value name="STAT"><shadow type="inout_highlow" id="^:5`^E^.2T1V+NUU]FI{"><field name="BOOL">HIGH</field></shadow></value><next><block type="inout_digital_write2" id="}NlK5x2Ft;0jNT^1n,gz"><value name="PIN"><shadow type="pins_digitalWrite" id="FYaBzyM=!#7!WKOZTiU8"><field name="PIN">0</field></shadow><block type="variables_get" id="{.|uD85rtpWQK;RLV.aH"><field name="VAR">pin4</field></block></value><value name="STAT"><shadow type="inout_highlow" id="!xWNn9XSqoNQf$nz)ejz"><field name="BOOL">LOW</field></shadow></value></block></next></block></next></block></next></block></statement></block></xml><config>{"CPUFreq":{"key":"240","label":"240MHz (WiFi/BT)"},"FlashMode":{"key":"qio","label":"QIO"},"PartitionScheme":{"key":"default","label":"Regular 4MB with spiffs (1.2MB APP/1.5MB SPIFFS)"},"FlashFreq":{"key":"80","label":"80MHz"}}</config><code>I2luY2x1ZGUgPGVzcDMyY2FtLmg+CiNpbmNsdWRlIDxXZWJTZXJ2ZXIuaD4KI2luY2x1ZGUgIkJsdWV0b290aFNlcmlhbC5oIgojaW5jbHVkZSA8QXJkdWluby5oPgoKCkJsdWV0b290aFNlcmlhbCBTZXJpYWxCVDsKdm9sYXRpbGUgY2hhciBhOwp2b2xhdGlsZSBpbnQgRU5BOwp2b2xhdGlsZSBpbnQgRU5COwp2b2xhdGlsZSBpbnQgUFdNOwp2b2xhdGlsZSBpbnQgcGluMTsKdm9sYXRpbGUgaW50IHBpbjI7CnZvbGF0aWxlIGludCBwaW4zOwp2b2xhdGlsZSBpbnQgcGluNDsKCmNvbnN0IGNoYXIqIFdJRklfU1NJRCA9ICJTVEVBTSI7ICAvLyDmlLnmiJDoh6rlt7HnmoR3aWZp5ZCN56ewCmNvbnN0IGNoYXIqIFdJRklfUEFTUyA9ICJ3emV6dHlqcyI7ICAvLyDmlLnmiJDoh6rlt7HnmoR3aWZp5a+G56CBCgpXZWJTZXJ2ZXIgc2VydmVyKDgwKTsKCnN0YXRpYyBhdXRvIGxvUmVzID0gZXNwMzJjYW06OlJlc29sdXRpb246OmZpbmQoMzIwLCAyNDApOwpzdGF0aWMgYXV0byBoaVJlcyA9IGVzcDMyY2FtOjpSZXNvbHV0aW9uOjpmaW5kKDgwMCwgNjAwKTsKCnZvaWQgaGFuZGxlQm1wKCkKewogIGlmICghZXNwMzJjYW06OkNhbWVyYS5jaGFuZ2VSZXNvbHV0aW9uKGxvUmVzKSkgewogICAgU2VyaWFsLnByaW50bG4oIlNFVC1MTy1SRVMgRkFJTCIpOwogIH0KCiAgYXV0byBmcmFtZSA9IGVzcDMyY2FtOjpjYXB0dXJlKCk7CiAgaWYgKGZyYW1lID09IG51bGxwdHIpIHsKICAgIFNlcmlhbC5wcmludGxuKCJDQVBUVVJFIEZBSUwiKTsKICAgIHNlcnZlci5zZW5kKDUwMywgIiIsICIiKTsKICAgIHJldHVybjsKICB9CiAgU2VyaWFsLnByaW50ZigiQ0FQVFVSRSBPSyAlZHglZCAlZGJcbiIsIGZyYW1lLT5nZXRXaWR0aCgpLCBmcmFtZS0+Z2V0SGVpZ2h0KCksCiAgICAgICAgICAgICAgICBzdGF0aWNfY2FzdDxpbnQ+KGZyYW1lLT5zaXplKCkpKTsKCiAgaWYgKCFmcmFtZS0+dG9CbXAoKSkgewogICAgU2VyaWFsLnByaW50bG4oIkNPTlZFUlQgRkFJTCIpOwogICAgc2VydmVyLnNlbmQoNTAzLCAiIiwgIiIpOwogICAgcmV0dXJuOwogIH0KICBTZXJpYWwucHJpbnRmKCJDT05WRVJUIE9LICVkeCVkICVkYlxuIiwgZnJhbWUtPmdldFdpZHRoKCksIGZyYW1lLT5nZXRIZWlnaHQoKSwKICAgICAgICAgICAgICAgIHN0YXRpY19jYXN0PGludD4oZnJhbWUtPnNpemUoKSkpOwoKICBzZXJ2ZXIuc2V0Q29udGVudExlbmd0aChmcmFtZS0+c2l6ZSgpKTsKICBzZXJ2ZXIuc2VuZCgyMDAsICJpbWFnZS9ibXAiKTsKICBXaUZpQ2xpZW50IGNsaWVudCA9IHNlcnZlci5jbGllbnQoKTsKICBmcmFtZS0+d3JpdGVUbyhjbGllbnQpOwp9Cgp2b2lkIHNlcnZlSnBnKCkKewogIGF1dG8gZnJhbWUgPSBlc3AzMmNhbTo6Y2FwdHVyZSgpOwogIGlmIChmcmFtZSA9PSBudWxscHRyKSB7CiAgICBTZXJpYWwucHJpbnRsbigiQ0FQVFVSRSBGQUlMIik7CiAgICBzZXJ2ZXIuc2VuZCg1MDMsICIiLCAiIik7CiAgICByZXR1cm47CiAgfQogIFNlcmlhbC5wcmludGYoIkNBUFRVUkUgT0sgJWR4JWQgJWRiXG4iLCBmcmFtZS0+Z2V0V2lkdGgoKSwgZnJhbWUtPmdldEhlaWdodCgpLAogICAgICAgICAgICAgICAgc3RhdGljX2Nhc3Q8aW50PihmcmFtZS0+c2l6ZSgpKSk7CgogIHNlcnZlci5zZXRDb250ZW50TGVuZ3RoKGZyYW1lLT5zaXplKCkpOwogIHNlcnZlci5zZW5kKDIwMCwgImltYWdlL2pwZWciKTsKICBXaUZpQ2xpZW50IGNsaWVudCA9IHNlcnZlci5jbGllbnQoKTsKICBmcmFtZS0+d3JpdGVUbyhjbGllbnQpOwp9Cgp2b2lkIGhhbmRsZUpwZ0xvKCkKewogIGlmICghZXNwMzJjYW06OkNhbWVyYS5jaGFuZ2VSZXNvbHV0aW9uKGxvUmVzKSkgewogICAgU2VyaWFsLnByaW50bG4oIlNFVC1MTy1SRVMgRkFJTCIpOwogIH0KICBzZXJ2ZUpwZygpOwp9Cgp2b2lkIGhhbmRsZUpwZ0hpKCkKewogIGlmICghZXNwMzJjYW06OkNhbWVyYS5jaGFuZ2VSZXNvbHV0aW9uKGhpUmVzKSkgewogICAgU2VyaWFsLnByaW50bG4oIlNFVC1ISS1SRVMgRkFJTCIpOwogIH0KICBzZXJ2ZUpwZygpOwp9Cgp2b2lkIGhhbmRsZUpwZygpCnsKICBzZXJ2ZXIuc2VuZEhlYWRlcigiTG9jYXRpb24iLCAiL2NhbS1oaS5qcGciKTsKICBzZXJ2ZXIuc2VuZCgzMDIsICIiLCAiIik7Cn0KCnZvaWQgaGFuZGxlTWpwZWcoKQp7CiAgaWYgKCFlc3AzMmNhbTo6Q2FtZXJhLmNoYW5nZVJlc29sdXRpb24oaGlSZXMpKSB7CiAgICBTZXJpYWwucHJpbnRsbigiU0VULUhJLVJFUyBGQUlMIik7CiAgfQoKICBTZXJpYWwucHJpbnRsbigiU1RSRUFNIEJFR0lOIik7CiAgV2lGaUNsaWVudCBjbGllbnQgPSBzZXJ2ZXIuY2xpZW50KCk7CiAgYXV0byBzdGFydFRpbWUgPSBtaWxsaXMoKTsKICBpbnQgcmVzID0gZXNwMzJjYW06OkNhbWVyYS5zdHJlYW1NanBlZyhjbGllbnQpOwogIGlmIChyZXMgPD0gMCkgewogICAgU2VyaWFsLnByaW50ZigiU1RSRUFNIEVSUk9SICVkXG4iLCByZXMpOwogICAgcmV0dXJuOwogIH0KICBhdXRvIGR1cmF0aW9uID0gbWlsbGlzKCkgLSBzdGFydFRpbWU7CiAgU2VyaWFsLnByaW50ZigiU1RSRUFNIEVORCAlZGZybSAlMC4yZmZwc1xuIiwgcmVzLCAxMDAwLjAgKiByZXMgLyBkdXJhdGlvbik7Cn0KCnZvaWQgc2V0dXAoKQp7CiAgU2VyaWFsLmJlZ2luKDExNTIwMCk7CiAgU2VyaWFsLnByaW50bG4oKTsKCiAgewogICAgdXNpbmcgbmFtZXNwYWNlIGVzcDMyY2FtOwogICAgQ29uZmlnIGNmZzsKICAgIGNmZy5zZXRQaW5zKHBpbnM6OkFpVGhpbmtlcik7CiAgICBjZmcuc2V0UmVzb2x1dGlvbihoaVJlcyk7CiAgICBjZmcuc2V0QnVmZmVyQ291bnQoMik7CiAgICBjZmcuc2V0SnBlZyg4MCk7CgogICAgYm9vbCBvayA9IENhbWVyYS5iZWdpbihjZmcpOwogICAgU2VyaWFsLnByaW50bG4ob2sgPyAiQ0FNRVJBIE9LIiA6ICJDQU1FUkEgRkFJTCIpOwogIH0KCiAgV2lGaS5wZXJzaXN0ZW50KGZhbHNlKTsKICBXaUZpLm1vZGUoV0lGSV9TVEEpOwogIFdpRmkuYmVnaW4oV0lGSV9TU0lELCBXSUZJX1BBU1MpOwogIHdoaWxlIChXaUZpLnN0YXR1cygpICE9IFdMX0NPTk5FQ1RFRCkgewogICAgZGVsYXkoNTAwKTsKICB9CgogIFNlcmlhbC5wcmludCgiaHR0cDovLyIpOwogIFNlcmlhbC5wcmludGxuKFdpRmkubG9jYWxJUCgpKTsKICBTZXJpYWwucHJpbnRsbigiICAvY2FtLmJtcCIpOwogIFNlcmlhbC5wcmludGxuKCIgIC9jYW0tbG8uanBnIik7CiAgU2VyaWFsLnByaW50bG4oIiAgL2NhbS1oaS5qcGciKTsKICBTZXJpYWwucHJpbnRsbigiICAvY2FtLm1qcGVnIik7CgogIHNlcnZlci5vbigiL2NhbS5ibXAiLCBoYW5kbGVCbXApOwogIHNlcnZlci5vbigiL2NhbS1sby5qcGciLCBoYW5kbGVKcGdMbyk7CiAgc2VydmVyLm9uKCIvY2FtLWhpLmpwZyIsIGhhbmRsZUpwZ0hpKTsKICBzZXJ2ZXIub24oIi9jYW0uanBnIiwgaGFuZGxlSnBnKTsKICBzZXJ2ZXIub24oIi9jYW0ubWpwZWciLCBoYW5kbGVNanBlZyk7CgogIHNlcnZlci5iZWdpbigpOwp9Cgp2b2lkIGxlZnQoKSB7CiAgcGluTW9kZShwaW4xLCBPVVRQVVQpOwogIGRpZ2l0YWxXcml0ZShwaW4xLEhJR0gpOwogIHBpbk1vZGUocGluMiwgT1VUUFVUKTsKICBkaWdpdGFsV3JpdGUocGluMixMT1cpOwogIHBpbk1vZGUocGluMywgT1VUUFVUKTsKICBkaWdpdGFsV3JpdGUocGluMyxMT1cpOwogIHBpbk1vZGUocGluNCwgT1VUUFVUKTsKICBkaWdpdGFsV3JpdGUocGluNCxMT1cpOwp9Cgp2b2lkIGJhY2soKSB7CiAgcGluTW9kZShwaW4xLCBPVVRQVVQpOwogIGRpZ2l0YWxXcml0ZShwaW4xLExPVyk7CiAgcGluTW9kZShwaW4yLCBPVVRQVVQpOwogIGRpZ2l0YWxXcml0ZShwaW4yLEhJR0gpOwogIHBpbk1vZGUocGluMywgT1VUUFVUKTsKICBkaWdpdGFsV3JpdGUocGluMyxMT1cpOwogIHBpbk1vZGUocGluNCwgT1VUUFVUKTsKICBkaWdpdGFsV3JpdGUocGluNCxISUdIKTsKfQoKdm9pZCByaWdodCgpIHsKICBwaW5Nb2RlKHBpbjEsIE9VVFBVVCk7CiAgZGlnaXRhbFdyaXRlKHBpbjEsTE9XKTsKICBwaW5Nb2RlKHBpbjIsIE9VVFBVVCk7CiAgZGlnaXRhbFdyaXRlKHBpbjIsTE9XKTsKICBwaW5Nb2RlKHBpbjMsIE9VVFBVVCk7CiAgZGlnaXRhbFdyaXRlKHBpbjMsSElHSCk7CiAgcGluTW9kZShwaW40LCBPVVRQVVQpOwogIGRpZ2l0YWxXcml0ZShwaW40LExPVyk7Cn0KCnZvaWQgc3RvcCgpIHsKICBwaW5Nb2RlKHBpbjEsIE9VVFBVVCk7CiAgZGlnaXRhbFdyaXRlKHBpbjEsTE9XKTsKICBwaW5Nb2RlKHBpbjIsIE9VVFBVVCk7CiAgZGlnaXRhbFdyaXRlKHBpbjIsTE9XKTsKICBwaW5Nb2RlKHBpbjMsIE9VVFBVVCk7CiAgZGlnaXRhbFdyaXRlKHBpbjMsTE9XKTsKICBwaW5Nb2RlKHBpbjQsIE9VVFBVVCk7CiAgZGlnaXRhbFdyaXRlKHBpbjQsTE9XKTsKfQoKdm9pZCBmb3J3YXJkKCkgewogIHBpbk1vZGUocGluMSwgT1VUUFVUKTsKICBkaWdpdGFsV3JpdGUocGluMSxISUdIKTsKICBwaW5Nb2RlKHBpbjIsIE9VVFBVVCk7CiAgZGlnaXRhbFdyaXRlKHBpbjIsTE9XKTsKICBwaW5Nb2RlKHBpbjMsIE9VVFBVVCk7CiAgZGlnaXRhbFdyaXRlKHBpbjMsSElHSCk7CiAgcGluTW9kZShwaW40LCBPVVRQVVQpOwogIGRpZ2l0YWxXcml0ZShwaW40LExPVyk7Cn0KCnZvaWQgc2V0dXAoKXsKICBTZXJpYWxCVC5iZWdpbigiRVNQMzJCVCIpOwogIFNlcmlhbC5wcmludGxuKCJUaGUgZGV2aWNlIHN0YXJ0ZWQsIG5vdyB5b3UgY2FuIHBhaXIgaXQgd2l0aCBibHVldG9vdGghIik7CiAgU2VyaWFsLmJlZ2luKDExNTIwMCk7CiAgYSA9IDA7CiAgRU5BID0gMjU7CiAgRU5CID0gMjY7CiAgUFdNID0gMTIwOwogIHBpbjEgPSAxMzsKICBwaW4yID0gMTI7CiAgcGluMyA9IDE0OwogIHBpbjQgPSAyNzsKfQoKdm9pZCBsb29wKCl7CiAgaWYgKFNlcmlhbEJULmF2YWlsYWJsZSgpID4gMCkgewogICAgYSA9IFNlcmlhbEJULnJlYWQoKTsKICAgIFNlcmlhbC5wcmludGxuKGEpOwogICAgc3dpdGNoIChhKSB7CiAgICAgY2FzZSAnZic6CiAgICAgIGZvcndhcmQoKTsKICAgICAgYnJlYWs7CiAgICAgY2FzZSAnYic6CiAgICAgIGJhY2soKTsKICAgICAgYnJlYWs7CiAgICAgY2FzZSAnbCc6CiAgICAgIGxlZnQoKTsKICAgICAgYnJlYWs7CiAgICAgY2FzZSAncic6CiAgICAgIHJpZ2h0KCk7CiAgICAgIGJyZWFrOwogICAgIGNhc2UgJ3MnOgogICAgICBzdG9wKCk7CiAgICAgIGJyZWFrOwogICAgfQoKICB9CgogIGFuYWxvZ1dyaXRlKEVOQSwgUFdNKTsKICBhbmFsb2dXcml0ZShFTkIsIFBXTSk7CiAgc2VydmVyLmhhbmRsZUNsaWVudCgpOwp9</code>